(this.webpackJsonpfiregram=this.webpackJsonpfiregram||[]).push([[0],{140:function(e,t,r){},141:function(e,t,r){},146:function(e,t,r){},249:function(e,t,r){},250:function(e,t,r){"use strict";r.r(t);var n=r(4),a=r(0),c=r.n(a),s=r(16),i=r.n(s),o=(r(140),r(13)),u=r(20),l=(r(141),r(6)),d=r.n(l),j=r(25),p=r(19),b=r(47);r(143),r(251),r(252);b.a.apps.length?b.a.app():b.a.initializeApp({apiKey:"AIzaSyCZsZBNOXiMRN1MEpIA5XW2M5coXBwNlkk",authDomain:"firegram-efff5.firebaseapp.com",projectId:"firegram-efff5",storageBucket:"firegram-efff5.appspot.com",messagingSenderId:"1047659849338",appId:"1:1047659849338:web:480fc244086afd36b27dc3"});var f=b.a.auth(),m=b.a.firestore(),O=b.a.storage(),h=new b.a.auth.GoogleAuthProvider;h.setCustomParameters({prompt:"select_account"});var x=function(){var e=Object(j.a)(d.a.mark((function e(t){var r,n,a,c,s,i,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.userAuth,n=t.additionalData,r){e.next=5;break}return e.abrupt("return");case 5:return a=r.uid,c=m.doc("users/".concat(a)),e.next=9,c.get();case 9:if(!e.sent.exists){s=r.displayName,i=r.email,o=new Date;try{c.set(Object(p.a)({displayName:s,email:i,createdAt:o},n))}catch(u){console.log(u)}}return e.abrupt("return",c);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=(r(146),r(33)),v="LOGIN_START",w="LOGIN_SUCCESS",y="SIGN_UP_START",N="CHECK_USER_SESSION",S="LOGOUT_START",k="LOGOUT_SUCCESS",E=function(e){var t=e.email,r=e.password;return{type:v,payload:{email:t,password:r}}},I=function(e){return{type:w,payload:e}},C=function(e){return{currentUser:e.user.currentUser}};function P(e){var t=e.setPage,r=(Object(u.d)(),Object(g.b)()),c=Object(g.c)(C).currentUser;return Object(a.useEffect)((function(){r({type:N})}),[]),Object(n.jsx)("div",{className:"navigation",children:Object(n.jsxs)("div",{className:"nav-container",children:[Object(n.jsx)("div",{className:"logo",onClick:function(){return t("/firegram")},children:"Firegram"}),Object(n.jsxs)("div",{className:"links",children:[!c&&Object(n.jsxs)(a.Fragment,{children:[Object(n.jsx)("span",{onClick:function(){return t("/login")},children:"Login"}),Object(n.jsx)("span",{onClick:function(){return t("/sign-up")},children:"SignUp"})]}),c&&Object(n.jsxs)(a.Fragment,{children:[Object(n.jsx)("span",{onClick:function(){return console.log("profile-page")},children:c.displayName}),Object(n.jsx)("span",{onClick:function(){return r({type:S})},children:"Logout"})]})]})]})})}var U=function(e){var t=e.file,r=e.setFile,c=function(e){var t=Object(a.useState)(0),r=Object(o.a)(t,2),n=r[0],c=r[1],s=Object(a.useState)(null),i=Object(o.a)(s,2),u=i[0],l=i[1],p=Object(a.useState)(null),b=Object(o.a)(p,2),f=b[0],h=b[1];return Object(a.useEffect)((function(){var t=O.ref(e.name),r=m.collection("pictures");t.put(e).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;c(t)}),(function(e){l(e)}),Object(j.a)(d.a.mark((function n(){var a,c;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.getDownloadURL();case 2:a=n.sent,c=new Date,r.add({url:a,createdAt:c,name:e.name}),h(a);case 6:case"end":return n.stop()}}),n)}))))}),[e]),{progress:n,error:u,url:f}}(t),s=c.progress,i=c.url;return Object(a.useEffect)(Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(100!=s||!i){e.next=4;break}return console.log(i),e.next=4,r(null);case 4:case"end":return e.stop()}}),e)}))),[i]),Object(a.useEffect)((function(){console.log(t)}),[t]),Object(n.jsxs)("div",{className:"progress-bar",style:{width:"".concat(s,"%")},children:[Math.round(s),"%"]})};var F=r(127);function _(e){var t=e.setSelectedImg,r=function(e){var t=Object(a.useState)([]),r=Object(o.a)(t,2),n=r[0],c=r[1];return Object(a.useEffect)((function(){var t=m.collection(e).orderBy("createdAt","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(p.a)({id:e.id},e.data()))})),c(t)}));return function(){return t()}}),[e]),{pictureList:n}}("pictures").pictureList,c=Object(a.useState)(null),s=Object(o.a)(c,2),i=s[0],u=s[1];return Object(a.useEffect)((function(){var e=[];r.forEach((function(t){e.push(t.url)})),e&&e.length===r.length&&u(e)}),[r]),Object(n.jsx)("div",{className:"pictures",children:i&&i.length===r.length&&i.map((function(e,r){return Object(n.jsx)(F.a.div,{className:"picture",onClick:function(){return t(e)},children:Object(n.jsx)("img",{src:e,alt:"pic no. ".concat(r+1)})},r)}))})}r(94);function A(e){var t=e.setSelectedImg,r=Object(a.useState)(null),c=Object(o.a)(r,2),s=c[0],i=c[1],u=Object(a.useState)(null),l=Object(o.a)(u,2),p=l[0],b=l[1];Object(a.useEffect)(Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case 1:case"end":return e.stop()}}),e)}))),[s]);var f=["image/png","image/jpeg","image/jpeg"],m=function(){var e=Object(j.a)(d.a.mark((function e(t){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=t.target.files[0])&&f.includes(r.type)?(i(r),b(null)):(i(null),b("Please select an image file(png/jpg/jpeg)"));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)(a.Fragment,{children:Object(n.jsxs)("div",{className:"container",children:[Object(n.jsxs)("div",{className:"title",children:["Your Pictures",Object(n.jsx)("p",{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. "}),Object(n.jsx)("input",{className:"upload-btn",type:"file",onChange:m}),p&&Object(n.jsx)("p",{className:"error",children:p}),s&&Object(n.jsxs)(a.Fragment,{children:[Object(n.jsx)("p",{className:"file-name",children:s.name}),Object(n.jsx)(U,{file:s,setFile:i})," "]}),!s&&Object(n.jsx)("div",{className:"spacer",children:" "})]}),Object(n.jsx)(_,{setSelectedImg:t})]})})}function T(e){var t=e.selectedImg,r=e.setSelectedImg;return Object(n.jsx)("div",{className:"modal-backdrop",onClick:function(e){e.target.classList.contains("modal-backdrop")&&r(null)},children:Object(n.jsx)("img",{src:t,alt:"selectedImg"})})}function L(e){var t=Object(a.useState)(null),r=Object(o.a)(t,2),c=r[0],s=r[1];return Object(n.jsxs)(a.Fragment,{children:[Object(n.jsx)(A,{setSelectedImg:s}),c&&Object(n.jsx)(T,{selectedImg:c,setSelectedImg:s})]})}var R=r(46),q=r(34),D=r(283),M=r(285),B=r(284),X=(r(249),function(e){return{currentUser:e.user.currentUser}}),z=Object(B.a)({margins:{marginBottom:"1rem"},btn:{},btnContainer:{width:"100%",height:"auto",display:"grid",justifyItems:"center"}}),G=function(e){var t=e.label,r=z(),c=Object(R.c)(e),s=Object(o.a)(c,2),i=s[0],u=s[1];return Object(n.jsx)(a.Fragment,{children:Object(n.jsx)(D.a,Object(p.a)(Object(p.a)(Object(p.a)({className:"".concat(r.margins),label:t,size:"small",variant:"outlined"},i),e),{},{error:u.touched&&u.error,helperText:u.touched?u.error:"",fullWidth:!0}))})},W=function(e){var t=e.content,r=e.color,c=e.type,s=z();return Object(n.jsx)(a.Fragment,{children:Object(n.jsx)("div",{className:"".concat(s.btnContainer),children:Object(n.jsx)(M.a,{className:"".concat(s.btn),variant:"contained",color:r,type:c,size:"small",children:t})})})};function V(e){var t=Object(g.c)(X).currentUser,r=Object(g.b)();z(),Object(u.d)();Object(a.useEffect)((function(){t&&e.setPage("/firegram")}),[t]),Object(a.useEffect)((function(){t&&e.setPage("/firegram")}),[]);var c=function(e){var t=e.email,n=e.password,a=e.displayName;r(function(e){var t=e.email,r=e.password,n=e.displayName;return{type:y,payload:{email:t,password:r,displayName:n}}}({email:t,password:n,displayName:a}))};return Object(n.jsx)(a.Fragment,{children:Object(n.jsxs)("div",{className:"card",children:[Object(n.jsx)("div",{className:"title",children:"Create an Account"}),Object(n.jsx)(R.b,{initialValues:{displayName:"",email:"",password:"",confirmPassword:""},validationSchema:q.a({displayName:q.c().min(6,"Minimum of 6 characters").max(20,"Maximum of 20 characters").required("Required"),email:q.c().email("Invalid Email").required("Required"),password:q.c().min(3,"Minimum of 3 characters").max(20,"Maximum of 20 chracters").required("Required"),confirmPassword:q.c().oneOf([q.b("password")],"passwords don't match").required("Required")}),onSubmit:function(){var t=Object(j.a)(d.a.mark((function t(r,n){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.resetForm,t.next=3,c(r);case 3:a(),console.log(e);case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),children:function(e){return Object(n.jsxs)(R.a,{children:[Object(n.jsx)(G,{type:"text",name:"displayName",label:"Username"}),Object(n.jsx)(G,{type:"email",name:"email",label:"Email"}),Object(n.jsx)(G,{type:"password",name:"password",label:"Password"}),Object(n.jsx)(G,{type:"password",name:"confirmPassword",label:"Confirm Password"}),Object(n.jsx)(W,{type:"submit",content:"Sign up",color:"primary"})]})}})]})})}function J(e){return Object(n.jsx)("div",{children:Object(n.jsx)(V,Object(p.a)({},e))})}var K=function(e){return{currentUser:e.user.currentUser}},Z=Object(B.a)({margins:{marginBottom:"1rem"},btn:{},btnContainer:{marginTop:"0.5rem",width:"100%",height:"auto",display:"grid",justifyItems:"center"}}),H=function(e){var t=e.label,r=Object(R.c)(e),c=Object(o.a)(r,2),s=c[0],i=c[1];return Object(n.jsx)(a.Fragment,{children:Object(n.jsx)(D.a,Object(p.a)(Object(p.a)(Object(p.a)({className:"",label:t,size:"small",variant:"outlined"},s),e),{},{error:i.touched&&i.error,helperText:i.touched?i.error:"",fullWidth:!0}))})},Y=function(e){var t=e.content,r=e.color,c=e.type,s=Z();return Object(n.jsx)(a.Fragment,{children:Object(n.jsx)("div",{className:"".concat(s.btnContainer),children:Object(n.jsx)(M.a,{className:"".concat(s.btn),variant:"contained",color:r,type:c,size:"small",children:t})})})};function Q(e){var t=Object(g.c)(K).currentUser,r=Object(g.b)(),c=(Object(u.d)(),Z()),s=function(){var e=Object(j.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,a=t.password,e.next=3,r(E({email:n,password:a}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){t&&e.setPage("/firegram")}),[t]),Object(a.useEffect)((function(){t&&e.setPage("/firegram")}),[]),Object(n.jsx)(a.Fragment,{children:Object(n.jsxs)("div",{className:"card",children:[Object(n.jsx)("div",{className:"title",children:"Login"}),Object(n.jsx)(R.b,{initialValues:{email:"",password:""},validationSchema:q.a({email:q.c().email("Invalid Email").required("Required"),password:q.c().min(3,"Minimum of 3 characters").max(20,"Maximum of 20 chracters").required("Required")}),onSubmit:function(){var e=Object(j.a)(d.a.mark((function e(t,r){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.resetForm,e.next=3,s(t);case 3:n();case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),children:function(e){return Object(n.jsxs)(R.a,{children:[Object(n.jsx)(H,{className:"".concat(c.margins),type:"email",name:"email",label:"Email"}),Object(n.jsx)(H,{type:"password",name:"password",label:"Password"}),Object(n.jsx)("a",{className:"forgot-password-link",href:"forgot-password",children:"Forgot Password?"}),Object(n.jsx)(Y,{type:"submit",content:"Login",color:"secondary"})]})}})]})})}function $(e){return Object(n.jsx)(Q,Object(p.a)({},e))}var ee=function(){var e=Object(a.useState)("/firegram"),t=Object(o.a)(e,2),r=t[0],c=t[1];return Object(u.d)(),Object(a.useEffect)((function(){console.log(r)}),[r]),Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(P,{setPage:c}),"/firegram"===r&&Object(n.jsx)(a.Fragment,{children:Object(n.jsx)(L,{})}),"/login"===r&&Object(n.jsx)($,{setPage:c}),"/sign-up"===r&&Object(n.jsx)(J,{setPage:c})]})},te=r(51),re=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,287)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),n(e),a(e),c(e),s(e)}))},ne=r(36),ae=r(128),ce=r(126),se={currentUser:null},ie=Object(ne.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(p.a)(Object(p.a)({},e),{},{currentUser:t.payload});case k:return Object(p.a)(Object(p.a)({},e),{},{currentUser:null});default:return e}}}),oe=r(28),ue=d.a.mark(xe),le=d.a.mark(ge),de=d.a.mark(ve),je=d.a.mark(we),pe=d.a.mark(ye),be=d.a.mark(Ne),fe=d.a.mark(Se),me=d.a.mark(ke),Oe=d.a.mark(Ee),he=d.a.mark(Ie);function xe(e,t){var r,n;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(oe.b)(x,{userAuth:e,additionalData:t});case 3:return r=a.sent,a.next=6,r.get();case 6:return n=a.sent,a.next=9,Object(oe.c)(I(Object(p.a)({id:n.id},n.data())));case 9:a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),console.log(a.t0);case 14:case"end":return a.stop()}}),ue,null,[[0,11]])}function ge(e){var t,r,n,a,c;return d.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,r=t.email,n=t.password,s.prev=1,s.next=4,f.signInWithEmailAndPassword(r,n);case 4:return a=s.sent,c=a.user,s.next=8,xe(c);case 8:s.next=13;break;case 10:s.prev=10,s.t0=s.catch(1),console.log(s.t0);case 13:case"end":return s.stop()}}),le,null,[[1,10]])}function ve(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.d)(v,ge);case 2:case"end":return e.stop()}}),de)}function we(e){var t,r,n,a,c,s;return d.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,r=t.email,n=t.password,a=t.displayName,i.prev=1,console.log("authSaga/createUser"),i.next=5,f.createUserWithEmailAndPassword(r,n);case 5:return c=i.sent,s=c.user,i.next=9,xe(s,{displayName:a});case 9:i.next=14;break;case 11:i.prev=11,i.t0=i.catch(1),console.log(i.t0);case 14:case"end":return i.stop()}}),je,null,[[1,11]])}function ye(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.d)(y,we);case 2:case"end":return e.stop()}}),pe)}function Ne(){var e;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("authSaga/isAuthenticated"),t.next=4,new Promise((function(e,t){var r=f.onAuthStateChanged((function(t){r(),e(t)}),t)}));case 4:if(e=t.sent){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,xe(e);case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),be,null,[[0,11]])}function Se(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.d)(N,Ne);case 2:case"end":return e.stop()}}),fe)}function ke(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.signOut();case 3:return e.next=5,Object(oe.c)({type:k});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),me,null,[[0,7]])}function Ee(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.d)(S,ke);case 2:case"end":return e.stop()}}),Oe)}function Ie(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.a)([Object(oe.b)(ve),Object(oe.b)(ye),Object(oe.b)(Ee),Object(oe.b)(Se)]);case 2:case"end":return e.stop()}}),he)}var Ce=d.a.mark(Pe);function Pe(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.a)([Object(oe.b)(Ie)]);case 2:case"end":return e.stop()}}),Ce)}var Ue=Object(ae.a)(),Fe=[Ue,ce.a],_e=Object(ne.e)(ie,{},Object(ne.d)(ne.a.apply(void 0,Fe),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));Ue.run(Pe);var Ae=_e;i.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(g.a,{store:Ae,children:Object(n.jsx)(te.a,{children:Object(n.jsx)(ee,{})})})}),document.getElementById("root")),re()},94:function(e,t,r){}},[[250,1,2]]]);
//# sourceMappingURL=main.8d3d14bd.chunk.js.map