(this.webpackJsonpfiregram=this.webpackJsonpfiregram||[]).push([[0],{140:function(e,t,r){},141:function(e,t,r){},146:function(e,t,r){},249:function(e,t,r){},250:function(e,t,r){"use strict";r.r(t);var n=r(4),a=r(0),c=r.n(a),s=r(16),i=r.n(s),o=(r(140),r(13)),u=r(20),l=(r(141),r(6)),d=r.n(l),j=r(25),b=r(19),p=r(47);r(143),r(251),r(252);p.a.apps.length?p.a.app():p.a.initializeApp({apiKey:"AIzaSyCZsZBNOXiMRN1MEpIA5XW2M5coXBwNlkk",authDomain:"firegram-efff5.firebaseapp.com",projectId:"firegram-efff5",storageBucket:"firegram-efff5.appspot.com",messagingSenderId:"1047659849338",appId:"1:1047659849338:web:480fc244086afd36b27dc3"});var f=p.a.auth(),m=p.a.firestore(),O=p.a.storage(),h=new p.a.auth.GoogleAuthProvider;h.setCustomParameters({prompt:"select_account"});var x=function(){var e=Object(j.a)(d.a.mark((function e(t){var r,n,a,c,s,i,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.userAuth,n=t.additionalData,r){e.next=5;break}return e.abrupt("return");case 5:return a=r.uid,c=m.doc("users/".concat(a)),e.next=9,c.get();case 9:if(!e.sent.exists){s=r.displayName,i=r.email,o=new Date;try{c.set(Object(b.a)({displayName:s,email:i,createdAt:o},n))}catch(u){console.log(u)}}return e.abrupt("return",c);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=(r(146),r(29)),v="LOGIN_START",w="LOGIN_SUCCESS",y="SIGN_UP_START",N="CHECK_USER_SESSION",S="LOGOUT_START",k="LOGOUT_SUCCESS",E=function(e){var t=e.email,r=e.password;return{type:v,payload:{email:t,password:r}}},U=function(e){return{type:w,payload:e}},I=function(e){return{currentUser:e.user.currentUser}};function C(e){var t=e.setPage,r=(Object(u.d)(),Object(g.b)()),c=Object(g.c)(I).currentUser;return Object(a.useEffect)((function(){r({type:N})}),[]),Object(n.jsx)("div",{className:"navigation",children:Object(n.jsxs)("div",{className:"nav-container",children:[Object(n.jsx)("div",{className:"logo",onClick:function(){return t("/firegram")},children:"Firegram"}),Object(n.jsxs)("div",{className:"links",children:[!c&&Object(n.jsxs)(a.Fragment,{children:[Object(n.jsx)("span",{onClick:function(){return t("/login")},children:"Login"}),Object(n.jsx)("span",{onClick:function(){return t("/sign-up")},children:"SignUp"})]}),c&&Object(n.jsxs)(a.Fragment,{children:[Object(n.jsx)("span",{onClick:function(){return console.log("profile-page")},children:c.displayName}),Object(n.jsx)("span",{onClick:function(){return r({type:S})},children:"Logout"})]})]})]})})}var P=function(e){var t=e.file,r=e.setFile,c=function(e){var t=Object(a.useState)(0),r=Object(o.a)(t,2),n=r[0],c=r[1],s=Object(a.useState)(null),i=Object(o.a)(s,2),u=i[0],l=i[1],b=Object(a.useState)(null),p=Object(o.a)(b,2),f=p[0],h=p[1];return Object(a.useEffect)((function(){var t=O.ref(e.name),r=m.collection("pictures");t.put(e).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;c(t)}),(function(e){l(e)}),Object(j.a)(d.a.mark((function n(){var a,c;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.getDownloadURL();case 2:a=n.sent,c=new Date,r.add({url:a,createdAt:c,name:e.name}),h(a);case 6:case"end":return n.stop()}}),n)}))))}),[e]),{progress:n,error:u,url:f}}(t),s=c.progress,i=c.url;return Object(a.useEffect)(Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(100!=s||!i){e.next=4;break}return console.log(i),e.next=4,r(null);case 4:case"end":return e.stop()}}),e)}))),[i]),Object(a.useEffect)((function(){console.log(t)}),[t]),Object(n.jsxs)("div",{className:"progress-bar",style:{width:"".concat(s,"%")},children:[Math.round(s),"%"]})};var F=r(127);function _(e){var t=e.setSelectedImg,r=function(e){var t=Object(a.useState)([]),r=Object(o.a)(t,2),n=r[0],c=r[1];return Object(a.useEffect)((function(){var t=m.collection(e).orderBy("createdAt","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(b.a)({id:e.id},e.data()))})),c(t)}));return function(){return t()}}),[e]),{pictureList:n}}("pictures").pictureList,c=Object(a.useState)(null),s=Object(o.a)(c,2),i=s[0],u=s[1];return Object(a.useEffect)((function(){var e=[];r.forEach((function(t){e.push(t.url)})),e&&e.length===r.length&&u(e)}),[r]),Object(n.jsx)("div",{className:"pictures",children:i&&i.length===r.length&&i.map((function(e,r){return Object(n.jsx)(F.a.div,{className:"picture",onClick:function(){return t(e)},children:Object(n.jsx)("img",{src:e,alt:"pic no. ".concat(r+1)})},r)}))})}r(94);var A=function(e){return{currentUser:e.user.currentUser}};function T(e){var t=Object(g.c)(A).currentUser,r=e.setSelectedImg,c=Object(a.useState)(null),s=Object(o.a)(c,2),i=s[0],u=s[1],l=Object(a.useState)(null),b=Object(o.a)(l,2),p=b[0],f=b[1];Object(a.useEffect)(Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case 1:case"end":return e.stop()}}),e)}))),[i]);var m=["image/png","image/jpeg","image/jpeg"],O=function(){var e=Object(j.a)(d.a.mark((function e(t){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=t.target.files[0])&&m.includes(r.type)?(u(r),f(null)):(u(null),f("Please select an image file(png/jpg/jpeg)"));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)(a.Fragment,{children:Object(n.jsxs)("div",{className:"container",children:[Object(n.jsxs)("div",{className:"title",children:["Your Pictures",Object(n.jsx)("p",{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. "}),t&&Object(n.jsx)("input",{className:"upload-btn",type:"file",onChange:O}),p&&Object(n.jsx)("p",{className:"error",children:p}),i&&Object(n.jsxs)(a.Fragment,{children:[Object(n.jsx)("p",{className:"file-name",children:i.name}),Object(n.jsx)(P,{file:i,setFile:u})," "]}),!i&&Object(n.jsx)("div",{className:"spacer",children:" "})]}),Object(n.jsx)(_,{setSelectedImg:r})]})})}function L(e){var t=e.selectedImg,r=e.setSelectedImg;return Object(n.jsx)("div",{className:"modal-backdrop",onClick:function(e){e.target.classList.contains("modal-backdrop")&&r(null)},children:Object(n.jsx)("img",{src:t,alt:"selectedImg"})})}function R(e){var t=Object(a.useState)(null),r=Object(o.a)(t,2),c=r[0],s=r[1];return Object(n.jsxs)(a.Fragment,{children:[Object(n.jsx)(T,{setSelectedImg:s}),c&&Object(n.jsx)(L,{selectedImg:c,setSelectedImg:s})]})}var q=r(46),D=r(34),M=r(283),B=r(285),X=r(284),z=(r(249),function(e){return{currentUser:e.user.currentUser}}),G=Object(X.a)({margins:{marginBottom:"1rem"},btn:{},btnContainer:{width:"100%",height:"auto",display:"grid",justifyItems:"center"}}),W=function(e){var t=e.label,r=G(),c=Object(q.c)(e),s=Object(o.a)(c,2),i=s[0],u=s[1];return Object(n.jsx)(a.Fragment,{children:Object(n.jsx)(M.a,Object(b.a)(Object(b.a)(Object(b.a)({className:"".concat(r.margins),label:t,size:"small",variant:"outlined"},i),e),{},{error:u.touched&&u.error,helperText:u.touched?u.error:"",fullWidth:!0}))})},V=function(e){var t=e.content,r=e.color,c=e.type,s=G();return Object(n.jsx)(a.Fragment,{children:Object(n.jsx)("div",{className:"".concat(s.btnContainer),children:Object(n.jsx)(B.a,{className:"".concat(s.btn),variant:"contained",color:r,type:c,size:"small",children:t})})})};function J(e){var t=Object(g.c)(z).currentUser,r=Object(g.b)();G(),Object(u.d)();Object(a.useEffect)((function(){t&&e.setPage("/firegram")}),[t]),Object(a.useEffect)((function(){t&&e.setPage("/firegram")}),[]);var c=function(e){var t=e.email,n=e.password,a=e.displayName;r(function(e){var t=e.email,r=e.password,n=e.displayName;return{type:y,payload:{email:t,password:r,displayName:n}}}({email:t,password:n,displayName:a}))};return Object(n.jsx)(a.Fragment,{children:Object(n.jsxs)("div",{className:"card",children:[Object(n.jsx)("div",{className:"title",children:"Create an Account"}),Object(n.jsx)(q.b,{initialValues:{displayName:"",email:"",password:"",confirmPassword:""},validationSchema:D.a({displayName:D.c().min(6,"Minimum of 6 characters").max(20,"Maximum of 20 characters").required("Required"),email:D.c().email("Invalid Email").required("Required"),password:D.c().min(3,"Minimum of 3 characters").max(20,"Maximum of 20 chracters").required("Required"),confirmPassword:D.c().oneOf([D.b("password")],"passwords don't match").required("Required")}),onSubmit:function(){var t=Object(j.a)(d.a.mark((function t(r,n){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.resetForm,t.next=3,c(r);case 3:a(),console.log(e);case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),children:function(e){return Object(n.jsxs)(q.a,{children:[Object(n.jsx)(W,{type:"text",name:"displayName",label:"Username"}),Object(n.jsx)(W,{type:"email",name:"email",label:"Email"}),Object(n.jsx)(W,{type:"password",name:"password",label:"Password"}),Object(n.jsx)(W,{type:"password",name:"confirmPassword",label:"Confirm Password"}),Object(n.jsx)(V,{type:"submit",content:"Sign up",color:"primary"})]})}})]})})}function K(e){return Object(n.jsx)("div",{children:Object(n.jsx)(J,Object(b.a)({},e))})}var Z=function(e){return{currentUser:e.user.currentUser}},H=Object(X.a)({margins:{marginBottom:"1rem"},btn:{},btnContainer:{marginTop:"0.5rem",width:"100%",height:"auto",display:"grid",justifyItems:"center"}}),Y=function(e){var t=e.label,r=Object(q.c)(e),c=Object(o.a)(r,2),s=c[0],i=c[1];return Object(n.jsx)(a.Fragment,{children:Object(n.jsx)(M.a,Object(b.a)(Object(b.a)(Object(b.a)({className:"",label:t,size:"small",variant:"outlined"},s),e),{},{error:i.touched&&i.error,helperText:i.touched?i.error:"",fullWidth:!0}))})},Q=function(e){var t=e.content,r=e.color,c=e.type,s=H();return Object(n.jsx)(a.Fragment,{children:Object(n.jsx)("div",{className:"".concat(s.btnContainer),children:Object(n.jsx)(B.a,{className:"".concat(s.btn),variant:"contained",color:r,type:c,size:"small",children:t})})})};function $(e){var t=Object(g.c)(Z).currentUser,r=Object(g.b)(),c=(Object(u.d)(),H()),s=function(){var e=Object(j.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,a=t.password,e.next=3,r(E({email:n,password:a}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){t&&e.setPage("/firegram")}),[t]),Object(a.useEffect)((function(){t&&e.setPage("/firegram")}),[]),Object(n.jsx)(a.Fragment,{children:Object(n.jsxs)("div",{className:"card",children:[Object(n.jsx)("div",{className:"title",children:"Login"}),Object(n.jsx)(q.b,{initialValues:{email:"",password:""},validationSchema:D.a({email:D.c().email("Invalid Email").required("Required"),password:D.c().min(3,"Minimum of 3 characters").max(20,"Maximum of 20 chracters").required("Required")}),onSubmit:function(){var e=Object(j.a)(d.a.mark((function e(t,r){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.resetForm,e.next=3,s(t);case 3:n();case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),children:function(e){return Object(n.jsxs)(q.a,{children:[Object(n.jsx)(Y,{className:"".concat(c.margins),type:"email",name:"email",label:"Email"}),Object(n.jsx)(Y,{type:"password",name:"password",label:"Password"}),Object(n.jsx)("a",{className:"forgot-password-link",href:"forgot-password",children:"Forgot Password?"}),Object(n.jsx)(Q,{type:"submit",content:"Login",color:"secondary"})]})}})]})})}function ee(e){return Object(n.jsx)($,Object(b.a)({},e))}var te=function(){var e=Object(a.useState)("/firegram"),t=Object(o.a)(e,2),r=t[0],c=t[1];return Object(u.d)(),Object(a.useEffect)((function(){console.log(r)}),[r]),Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(C,{setPage:c}),"/firegram"===r&&Object(n.jsx)(a.Fragment,{children:Object(n.jsx)(R,{})}),"/login"===r&&Object(n.jsx)(ee,{setPage:c}),"/sign-up"===r&&Object(n.jsx)(K,{setPage:c})]})},re=r(51),ne=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,287)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),n(e),a(e),c(e),s(e)}))},ae=r(36),ce=r(128),se=r(126),ie={currentUser:null},oe=Object(ae.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(b.a)(Object(b.a)({},e),{},{currentUser:t.payload});case k:return Object(b.a)(Object(b.a)({},e),{},{currentUser:null});default:return e}}}),ue=r(28),le=d.a.mark(ge),de=d.a.mark(ve),je=d.a.mark(we),be=d.a.mark(ye),pe=d.a.mark(Ne),fe=d.a.mark(Se),me=d.a.mark(ke),Oe=d.a.mark(Ee),he=d.a.mark(Ue),xe=d.a.mark(Ie);function ge(e,t){var r,n;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(ue.b)(x,{userAuth:e,additionalData:t});case 3:return r=a.sent,a.next=6,r.get();case 6:return n=a.sent,a.next=9,Object(ue.c)(U(Object(b.a)({id:n.id},n.data())));case 9:a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),console.log(a.t0);case 14:case"end":return a.stop()}}),le,null,[[0,11]])}function ve(e){var t,r,n,a,c;return d.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,r=t.email,n=t.password,s.prev=1,s.next=4,f.signInWithEmailAndPassword(r,n);case 4:return a=s.sent,c=a.user,s.next=8,ge(c);case 8:s.next=13;break;case 10:s.prev=10,s.t0=s.catch(1),console.log(s.t0);case 13:case"end":return s.stop()}}),de,null,[[1,10]])}function we(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ue.d)(v,ve);case 2:case"end":return e.stop()}}),je)}function ye(e){var t,r,n,a,c,s;return d.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,r=t.email,n=t.password,a=t.displayName,i.prev=1,console.log("authSaga/createUser"),i.next=5,f.createUserWithEmailAndPassword(r,n);case 5:return c=i.sent,s=c.user,i.next=9,ge(s,{displayName:a});case 9:i.next=14;break;case 11:i.prev=11,i.t0=i.catch(1),console.log(i.t0);case 14:case"end":return i.stop()}}),be,null,[[1,11]])}function Ne(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ue.d)(y,ye);case 2:case"end":return e.stop()}}),pe)}function Se(){var e;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("authSaga/isAuthenticated"),t.next=4,new Promise((function(e,t){var r=f.onAuthStateChanged((function(t){r(),e(t)}),t)}));case 4:if(e=t.sent){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,ge(e);case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),fe,null,[[0,11]])}function ke(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ue.d)(N,Se);case 2:case"end":return e.stop()}}),me)}function Ee(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.signOut();case 3:return e.next=5,Object(ue.c)({type:k});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),Oe,null,[[0,7]])}function Ue(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ue.d)(S,Ee);case 2:case"end":return e.stop()}}),he)}function Ie(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ue.a)([Object(ue.b)(we),Object(ue.b)(Ne),Object(ue.b)(Ue),Object(ue.b)(ke)]);case 2:case"end":return e.stop()}}),xe)}var Ce=d.a.mark(Pe);function Pe(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ue.a)([Object(ue.b)(Ie)]);case 2:case"end":return e.stop()}}),Ce)}var Fe=Object(ce.a)(),_e=[Fe,se.a],Ae=Object(ae.e)(oe,{},Object(ae.d)(ae.a.apply(void 0,_e),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));Fe.run(Pe);var Te=Ae;i.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(g.a,{store:Te,children:Object(n.jsx)(re.a,{children:Object(n.jsx)(te,{})})})}),document.getElementById("root")),ne()},94:function(e,t,r){}},[[250,1,2]]]);
//# sourceMappingURL=main.034d9164.chunk.js.map