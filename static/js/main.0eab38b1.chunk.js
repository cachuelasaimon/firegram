(this.webpackJsonpfiregram=this.webpackJsonpfiregram||[]).push([[0],{140:function(e,t,r){},141:function(e,t,r){},146:function(e,t,r){},249:function(e,t,r){},250:function(e,t,r){"use strict";r.r(t);var n=r(4),a=r(0),c=r.n(a),s=r(16),i=r.n(s),u=(r(140),r(13)),o=(r(141),r(6)),l=r.n(o),d=r(25),j=r(19),f=r(47);r(143),r(251),r(252);f.a.apps.length?f.a.app():f.a.initializeApp({apiKey:"AIzaSyCZsZBNOXiMRN1MEpIA5XW2M5coXBwNlkk",authDomain:"firegram-efff5.firebaseapp.com",projectId:"firegram-efff5",storageBucket:"firegram-efff5.appspot.com",messagingSenderId:"1047659849338",appId:"1:1047659849338:web:480fc244086afd36b27dc3"});var p=f.a.auth(),b=f.a.firestore(),m=f.a.storage(),O=new f.a.auth.GoogleAuthProvider;O.setCustomParameters({prompt:"select_account"});var h=function(){var e=Object(d.a)(l.a.mark((function e(t){var r,n,a,c,s,i,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.userAuth,n=t.additionalData,r){e.next=5;break}return e.abrupt("return");case 5:return a=r.uid,c=b.doc("users/".concat(a)),e.next=9,c.get();case 9:if(!e.sent.exists){s=r.displayName,i=r.email,u=new Date;try{c.set(Object(j.a)({displayName:s,email:i,createdAt:u},n))}catch(o){console.log(o)}}return e.abrupt("return",c);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=r(20),g=(r(146),r(27)),v="LOGIN_START",w="LOGIN_SUCCESS",y="SIGN_UP_START",N="CHECK_USER_SESSION",k="LOGOUT_START",S="LOGOUT_SUCCESS",U=function(e){var t=e.email,r=e.password;return{type:v,payload:{email:t,password:r}}},E=function(e){return{type:w,payload:e}},C=function(e){return{currentUser:e.user.currentUser}};function P(e){var t=e.setPage,r=(Object(x.d)(),Object(g.b)()),c=Object(g.c)(C).currentUser;return Object(a.useEffect)((function(){r({type:N})}),[]),Object(n.jsx)("div",{className:"navigation",children:Object(n.jsxs)("div",{className:"nav-container",children:[Object(n.jsx)("div",{className:"logo",onClick:function(){return t("/firegram")},children:"Firegram"}),Object(n.jsxs)("div",{className:"links",children:[!c&&Object(n.jsxs)(a.Fragment,{children:[Object(n.jsx)("span",{onClick:function(){return t("/login")},children:"Login"}),Object(n.jsx)("span",{onClick:function(){return t("/sign-up")},children:"SignUp"})]}),c&&Object(n.jsxs)(a.Fragment,{children:[Object(n.jsx)("span",{onClick:function(){return console.log("profile-page")},children:c.displayName}),Object(n.jsx)("span",{onClick:function(){return r({type:k})},children:"Logout"})]})]})]})})}var I=function(e){return{currentUser:e.user.currentUser}},F=function(e){var t=e.file,r=e.setFile,c=Object(g.c)(I).currentUser,s=function(e,t){var r=Object(a.useState)(0),n=Object(u.a)(r,2),c=n[0],s=n[1],i=Object(a.useState)(null),o=Object(u.a)(i,2),j=o[0],f=o[1],p=Object(a.useState)(null),O=Object(u.a)(p,2),h=O[0],x=O[1];return Object(a.useEffect)((function(){var r=m.ref(e.name),n=b.collection("pictures"),a=b.collection("users/".concat(t,"/pictures"));r.put(e).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;s(t)}),(function(e){f(e)}),Object(d.a)(l.a.mark((function c(){var s,i;return l.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,r.getDownloadURL();case 2:s=c.sent,i=new Date,n.add({url:s,createdAt:i,name:e.name,poster:t}),a.add({url:s,createdAt:i,name:e.name}),x(s);case 7:case"end":return c.stop()}}),c)}))))}),[e]),{progress:c,error:j,url:h}}(t,c.id),i=s.progress,o=s.url;return Object(a.useEffect)(Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(100!=i||!o){e.next=4;break}return console.log(o),e.next=4,r(null);case 4:case"end":return e.stop()}}),e)}))),[o]),Object(a.useEffect)((function(){console.log(c)}),[]),Object(a.useEffect)((function(){console.log(t)}),[t]),Object(n.jsxs)("div",{className:"progress-bar",style:{width:"".concat(i,"%")},children:[Math.round(i),"%"]})};var A=r(127),L=function(e){return{currentUser:e.user.currentUser}};function T(e){var t=Object(g.c)(L).currentUser,r=e.setSelectedImg,c=Object(a.useState)(null),s=Object(u.a)(c,2),i=s[0],o=s[1],l=Object(a.useState)("pictures"),d=Object(u.a)(l,2),f=d[0],p=d[1],m=function(e){var t=Object(a.useState)([]),r=Object(u.a)(t,2),n=r[0],c=r[1];return Object(a.useEffect)((function(){var t=b.collection(e).orderBy("createdAt","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(j.a)({id:e.id},e.data()))})),c(t)}));return function(){return t()}}),[e]),{pictureList:n}}(f).pictureList;return Object(a.useEffect)((function(){var e=[];m.forEach((function(t){e.push(t.url)})),e&&e.length===m.length&&o(e)}),[m]),Object(a.useEffect)((function(){p(t?"users/".concat(t.id,"/pictures"):"pictures")}),[t]),Object(n.jsx)("div",{className:"pictures",children:t&&i&&i.length===m.length&&i.map((function(e,t){return Object(n.jsx)(A.a.div,{className:"picture",onClick:function(){return r(e)},children:Object(n.jsx)("img",{src:e,alt:"pic no. ".concat(t+1)})},t)}))})}r(94);var q=function(e){return{currentUser:e.user.currentUser}};function R(e){var t=Object(g.c)(q).currentUser,r=e.setSelectedImg,c=Object(a.useState)(null),s=Object(u.a)(c,2),i=s[0],o=s[1],j=Object(a.useState)(null),f=Object(u.a)(j,2),p=f[0],b=f[1];Object(a.useEffect)(Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case 1:case"end":return e.stop()}}),e)}))),[i]);var m=["image/png","image/jpeg","image/jpeg"],O=function(){var e=Object(d.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=t.target.files[0])&&m.includes(r.type)?(o(r),b(null)):(o(null),b("Please select an image file(png/jpg/jpeg)"));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)(a.Fragment,{children:Object(n.jsxs)("div",{className:"container",children:[Object(n.jsxs)("div",{className:"title",children:[t?"Your Pictures ".concat(t.displayName):"Please login to upload pictures",Object(n.jsx)("p",{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. "}),t&&Object(n.jsx)("input",{className:"upload-btn",type:"file",onChange:O}),p&&Object(n.jsx)("p",{className:"error",children:p}),i&&Object(n.jsxs)(a.Fragment,{children:[Object(n.jsx)("p",{className:"file-name",children:i.name}),Object(n.jsx)(F,{file:i,setFile:o})," "]}),!i&&Object(n.jsx)("div",{className:"spacer",children:" "})]}),Object(n.jsx)(T,{setSelectedImg:r})]})})}function M(e){var t=e.selectedImg,r=e.setSelectedImg;return Object(n.jsx)("div",{className:"modal-backdrop",onClick:function(e){e.target.classList.contains("modal-backdrop")&&r(null)},children:Object(n.jsx)("img",{src:t,alt:"selectedImg"})})}function _(e){var t=Object(a.useState)(null),r=Object(u.a)(t,2),c=r[0],s=r[1];return Object(n.jsxs)(a.Fragment,{children:[Object(n.jsx)(R,{setSelectedImg:s}),c&&Object(n.jsx)(M,{selectedImg:c,setSelectedImg:s})]})}var B=r(46),D=r(34),z=r(283),G=r(285),W=r(284),X=(r(249),function(e){return{currentUser:e.user.currentUser}}),J=Object(W.a)({margins:{marginBottom:"1rem"},btn:{},btnContainer:{width:"100%",height:"auto",display:"grid",justifyItems:"center"}}),K=function(e){var t=e.label,r=J(),c=Object(B.c)(e),s=Object(u.a)(c,2),i=s[0],o=s[1];return Object(n.jsx)(a.Fragment,{children:Object(n.jsx)(z.a,Object(j.a)(Object(j.a)(Object(j.a)({className:"".concat(r.margins),label:t,size:"small",variant:"outlined"},i),e),{},{error:o.touched&&o.error,helperText:o.touched?o.error:"",fullWidth:!0}))})},V=function(e){var t=e.content,r=e.color,c=e.type,s=J();return Object(n.jsx)(a.Fragment,{children:Object(n.jsx)("div",{className:"".concat(s.btnContainer),children:Object(n.jsx)(G.a,{className:"".concat(s.btn),variant:"contained",color:r,type:c,size:"small",children:t})})})};function Z(e){var t=Object(g.c)(X).currentUser,r=Object(g.b)();J(),Object(x.d)();Object(a.useEffect)((function(){t&&e.setPage("/firegram")}),[t]),Object(a.useEffect)((function(){t&&e.setPage("/firegram")}),[]);var c=function(e){var t=e.email,n=e.password,a=e.displayName;r(function(e){var t=e.email,r=e.password,n=e.displayName;return{type:y,payload:{email:t,password:r,displayName:n}}}({email:t,password:n,displayName:a}))};return Object(n.jsx)(a.Fragment,{children:Object(n.jsxs)("div",{className:"card",children:[Object(n.jsx)("div",{className:"title",children:"Create an Account"}),Object(n.jsx)(B.b,{initialValues:{displayName:"",email:"",password:"",confirmPassword:""},validationSchema:D.a({displayName:D.c().min(6,"Minimum of 6 characters").max(20,"Maximum of 20 characters").required("Required"),email:D.c().email("Invalid Email").required("Required"),password:D.c().min(3,"Minimum of 3 characters").max(20,"Maximum of 20 chracters").required("Required"),confirmPassword:D.c().oneOf([D.b("password")],"passwords don't match").required("Required")}),onSubmit:function(){var t=Object(d.a)(l.a.mark((function t(r,n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.resetForm,t.next=3,c(r);case 3:a(),console.log(e);case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),children:function(e){return Object(n.jsxs)(B.a,{children:[Object(n.jsx)(K,{type:"text",name:"displayName",label:"Username"}),Object(n.jsx)(K,{type:"email",name:"email",label:"Email"}),Object(n.jsx)(K,{type:"password",name:"password",label:"Password"}),Object(n.jsx)(K,{type:"password",name:"confirmPassword",label:"Confirm Password"}),Object(n.jsx)(V,{type:"submit",content:"Sign up",color:"primary"})]})}})]})})}function H(e){return Object(n.jsx)("div",{children:Object(n.jsx)(Z,Object(j.a)({},e))})}var Y=function(e){return{currentUser:e.user.currentUser}},Q=Object(W.a)({margins:{marginBottom:"1rem"},btn:{},btnContainer:{marginTop:"0.5rem",width:"100%",height:"auto",display:"grid",justifyItems:"center"}}),$=function(e){var t=e.label,r=Object(B.c)(e),c=Object(u.a)(r,2),s=c[0],i=c[1];return Object(n.jsx)(a.Fragment,{children:Object(n.jsx)(z.a,Object(j.a)(Object(j.a)(Object(j.a)({className:"",label:t,size:"small",variant:"outlined"},s),e),{},{error:i.touched&&i.error,helperText:i.touched?i.error:"",fullWidth:!0}))})},ee=function(e){var t=e.content,r=e.color,c=e.type,s=Q();return Object(n.jsx)(a.Fragment,{children:Object(n.jsx)("div",{className:"".concat(s.btnContainer),children:Object(n.jsx)(G.a,{className:"".concat(s.btn),variant:"contained",color:r,type:c,size:"small",children:t})})})};function te(e){var t=Object(g.c)(Y).currentUser,r=Object(g.b)(),c=(Object(x.d)(),Q()),s=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,a=t.password,e.next=3,r(U({email:n,password:a}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){t&&e.setPage("/firegram")}),[t]),Object(a.useEffect)((function(){t&&e.setPage("/firegram")}),[]),Object(n.jsx)(a.Fragment,{children:Object(n.jsxs)("div",{className:"card",children:[Object(n.jsx)("div",{className:"title",children:"Login"}),Object(n.jsx)(B.b,{initialValues:{email:"",password:""},validationSchema:D.a({email:D.c().email("Invalid Email").required("Required"),password:D.c().min(3,"Minimum of 3 characters").max(20,"Maximum of 20 chracters").required("Required")}),onSubmit:function(){var e=Object(d.a)(l.a.mark((function e(t,r){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.resetForm,e.next=3,s(t);case 3:n();case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),children:function(e){return Object(n.jsxs)(B.a,{children:[Object(n.jsx)($,{className:"".concat(c.margins),type:"email",name:"email",label:"Email"}),Object(n.jsx)($,{type:"password",name:"password",label:"Password"}),Object(n.jsx)("a",{className:"forgot-password-link",href:"forgot-password",children:"Forgot Password?"}),Object(n.jsx)(ee,{type:"submit",content:"Login",color:"secondary"})]})}})]})})}function re(e){return Object(n.jsx)(te,Object(j.a)({},e))}var ne=function(){var e=Object(a.useState)("/firegram"),t=Object(u.a)(e,2),r=t[0],c=t[1];return Object(a.useEffect)((function(){c("/firegram")}),[]),Object(a.useEffect)((function(){console.log(r)}),[r]),Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(P,{setPage:c}),"/firegram"===r&&Object(n.jsx)(a.Fragment,{children:Object(n.jsx)(_,{})}),"/login"===r&&Object(n.jsx)(re,{setPage:c}),"/sign-up"===r&&Object(n.jsx)(H,{setPage:c})]})},ae=r(51),ce=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,287)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),n(e),a(e),c(e),s(e)}))},se=r(36),ie=r(128),ue=r(126),oe={currentUser:null},le=Object(se.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(j.a)(Object(j.a)({},e),{},{currentUser:t.payload});case S:return Object(j.a)(Object(j.a)({},e),{},{currentUser:null});default:return e}}}),de=r(29),je=l.a.mark(we),fe=l.a.mark(ye),pe=l.a.mark(Ne),be=l.a.mark(ke),me=l.a.mark(Se),Oe=l.a.mark(Ue),he=l.a.mark(Ee),xe=l.a.mark(Ce),ge=l.a.mark(Pe),ve=l.a.mark(Ie);function we(e,t){var r,n;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(de.b)(h,{userAuth:e,additionalData:t});case 3:return r=a.sent,a.next=6,r.get();case 6:return n=a.sent,a.next=9,Object(de.c)(E(Object(j.a)({id:n.id},n.data())));case 9:a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),console.log(a.t0);case 14:case"end":return a.stop()}}),je,null,[[0,11]])}function ye(e){var t,r,n,a,c;return l.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,r=t.email,n=t.password,s.prev=1,s.next=4,p.signInWithEmailAndPassword(r,n);case 4:return a=s.sent,c=a.user,s.next=8,we(c);case 8:s.next=13;break;case 10:s.prev=10,s.t0=s.catch(1),console.log(s.t0);case 13:case"end":return s.stop()}}),fe,null,[[1,10]])}function Ne(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.d)(v,ye);case 2:case"end":return e.stop()}}),pe)}function ke(e){var t,r,n,a,c,s;return l.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,r=t.email,n=t.password,a=t.displayName,i.prev=1,i.next=4,p.createUserWithEmailAndPassword(r,n);case 4:return c=i.sent,s=c.user,i.next=8,we(s,{displayName:a});case 8:i.next=13;break;case 10:i.prev=10,i.t0=i.catch(1),console.log(i.t0);case 13:case"end":return i.stop()}}),be,null,[[1,10]])}function Se(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.d)(y,ke);case 2:case"end":return e.stop()}}),me)}function Ue(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,new Promise((function(e,t){var r=p.onAuthStateChanged((function(t){r(),e(t)}),t)}));case 3:if(e=t.sent){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,we(e);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),Oe,null,[[0,10]])}function Ee(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.d)(N,Ue);case 2:case"end":return e.stop()}}),he)}function Ce(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.signOut();case 3:return e.next=5,Object(de.c)({type:S});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),xe,null,[[0,7]])}function Pe(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.d)(k,Ce);case 2:case"end":return e.stop()}}),ge)}function Ie(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.a)([Object(de.b)(Ne),Object(de.b)(Se),Object(de.b)(Ee),Object(de.b)(Pe)]);case 2:case"end":return e.stop()}}),ve)}var Fe=l.a.mark(Ae);function Ae(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.a)([Object(de.b)(Ie)]);case 2:case"end":return e.stop()}}),Fe)}var Le=Object(ie.a)(),Te=[Le,ue.a],qe=Object(se.e)(le,{},Object(se.d)(se.a.apply(void 0,Te)));Le.run(Ae);var Re=qe;i.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(g.a,{store:Re,children:Object(n.jsx)(ae.a,{children:Object(n.jsx)(ne,{})})})}),document.getElementById("root")),ce()},94:function(e,t,r){}},[[250,1,2]]]);
//# sourceMappingURL=main.0eab38b1.chunk.js.map