(this.webpackJsonpfiregram=this.webpackJsonpfiregram||[]).push([[0],{140:function(e,t,r){},141:function(e,t,r){},146:function(e,t,r){},249:function(e,t,r){},250:function(e,t,r){"use strict";r.r(t);var n=r(4),a=r(0),c=r.n(a),s=r(17),i=r.n(s),o=(r(140),r(13)),u=(r(141),r(6)),l=r.n(u),d=r(21),j=r(14),b=r(48);r(143),r(251),r(252);b.a.apps.length?b.a.app():b.a.initializeApp({apiKey:"AIzaSyCZsZBNOXiMRN1MEpIA5XW2M5coXBwNlkk",authDomain:"firegram-efff5.firebaseapp.com",projectId:"firegram-efff5",storageBucket:"firegram-efff5.appspot.com",messagingSenderId:"1047659849338",appId:"1:1047659849338:web:480fc244086afd36b27dc3"});var p=b.a.auth(),f=b.a.firestore(),m=b.a.storage(),O=new b.a.auth.GoogleAuthProvider;O.setCustomParameters({prompt:"select_account"});var h=function(){var e=Object(d.a)(l.a.mark((function e(t){var r,n,a,c,s,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.userAuth,n=t.additionalData,r){e.next=5;break}return e.abrupt("return");case 5:return a=r.uid,c=f.doc("users/".concat(a)),e.next=9,c.get();case 9:if(!e.sent.exists){s=r.displayName,i=r.email,o=new Date;try{c.set(Object(j.a)({displayName:s,email:i,createdAt:o},n))}catch(u){console.log(u)}}return e.abrupt("return",c);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=r(20),v=(r(146),r(24)),g="LOGIN_START",w="LOGIN_SUCCESS",y="SIGN_UP_START",N="CHECK_USER_SESSION",k="LOGOUT_START",S="LOGOUT_SUCCESS",E="PASSWORD_RESET",U=function(e){var t=e.email,r=e.password;return{type:g,payload:{email:t,password:r}}},P=function(e){return{type:w,payload:e}},C=function(e){return{currentUser:e.user.currentUser}};function F(e){var t=e.setPage,r=(Object(x.d)(),Object(v.b)()),c=Object(v.c)(C).currentUser;return Object(a.useEffect)((function(){r({type:N})}),[]),Object(n.jsx)("div",{className:"navigation",children:Object(n.jsxs)("div",{className:"nav-container",children:[Object(n.jsx)("div",{className:"logo",onClick:function(){return t("/firegram")},children:"Firegram"}),Object(n.jsxs)("div",{className:"links",children:[!c&&Object(n.jsxs)(a.Fragment,{children:[Object(n.jsx)("span",{onClick:function(){return t("/login")},children:"Login"}),Object(n.jsx)("span",{onClick:function(){return t("/sign-up")},children:"SignUp"})]}),c&&Object(n.jsxs)(a.Fragment,{children:[Object(n.jsx)("span",{onClick:function(){return console.log("profile-page")},children:c.displayName}),Object(n.jsx)("span",{onClick:function(){return r({type:k})},children:"Logout"})]})]})]})})}var I=function(e){return{currentUser:e.user.currentUser}},A=function(e){var t=e.file,r=e.setFile,c=Object(v.c)(I).currentUser,s=function(e,t){var r=Object(a.useState)(0),n=Object(o.a)(r,2),c=n[0],s=n[1],i=Object(a.useState)(null),u=Object(o.a)(i,2),j=u[0],b=u[1],p=Object(a.useState)(null),O=Object(o.a)(p,2),h=O[0],x=O[1];return Object(a.useEffect)((function(){var r=m.ref(e.name),n=f.collection("pictures"),a=f.collection("users/".concat(t,"/pictures"));r.put(e).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;s(t)}),(function(e){b(e)}),Object(d.a)(l.a.mark((function c(){var s,i;return l.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,r.getDownloadURL();case 2:s=c.sent,i=new Date,n.add({url:s,createdAt:i,name:e.name,poster:t}),a.add({url:s,createdAt:i,name:e.name}),x(s);case 7:case"end":return c.stop()}}),c)}))))}),[e]),{progress:c,error:j,url:h}}(t,c.id),i=s.progress,u=s.url;return Object(a.useEffect)(Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(100!=i||!u){e.next=4;break}return console.log(u),e.next=4,r(null);case 4:case"end":return e.stop()}}),e)}))),[u]),Object(a.useEffect)((function(){console.log(c)}),[]),Object(a.useEffect)((function(){console.log(t)}),[t]),Object(n.jsxs)("div",{className:"progress-bar",style:{width:"".concat(i,"%")},children:[Math.round(i),"%"]})};var R=r(128),T=function(e){return{currentUser:e.user.currentUser}};function L(e){var t=Object(v.c)(T).currentUser,r=e.setSelectedImg,c=Object(a.useState)(null),s=Object(o.a)(c,2),i=s[0],u=s[1],l=Object(a.useState)("pictures"),d=Object(o.a)(l,2),b=d[0],p=d[1],m=function(e){var t=Object(a.useState)([]),r=Object(o.a)(t,2),n=r[0],c=r[1];return Object(a.useEffect)((function(){var t=f.collection(e).orderBy("createdAt","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(j.a)({id:e.id},e.data()))})),c(t)}));return function(){return t()}}),[e]),{pictureList:n}}(b).pictureList;return Object(a.useEffect)((function(){var e=[];m.forEach((function(t){e.push(t.url)})),e&&e.length===m.length&&u(e)}),[m]),Object(a.useEffect)((function(){p(t?"users/".concat(t.id,"/pictures"):"pictures")}),[t]),Object(n.jsx)("div",{className:"pictures",children:t&&i&&i.length===m.length&&i.map((function(e,t){return Object(n.jsx)(R.a.div,{className:"picture",onClick:function(){return r(e)},children:Object(n.jsx)("img",{src:e,alt:"pic no. ".concat(t+1)})},t)}))})}r(95);var q=function(e){return{currentUser:e.user.currentUser}};function M(e){var t=Object(v.c)(q).currentUser,r=e.setSelectedImg,c=Object(a.useState)(null),s=Object(o.a)(c,2),i=s[0],u=s[1],j=Object(a.useState)(null),b=Object(o.a)(j,2),p=b[0],f=b[1];Object(a.useEffect)(Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case 1:case"end":return e.stop()}}),e)}))),[i]);var m=["image/png","image/jpeg","image/jpeg"],O=function(){var e=Object(d.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=t.target.files[0])&&m.includes(r.type)?(u(r),f(null)):(u(null),f("Please select an image file(png/jpg/jpeg)"));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)(a.Fragment,{children:Object(n.jsxs)("div",{className:"container",children:[Object(n.jsxs)("div",{className:"title",children:[t?"Your Pictures ".concat(t.displayName):"Please login to upload pictures",Object(n.jsx)("p",{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. "}),t&&Object(n.jsx)("input",{className:"upload-btn",type:"file",onChange:O}),p&&Object(n.jsx)("p",{className:"error",children:p}),i&&Object(n.jsxs)(a.Fragment,{children:[Object(n.jsx)("p",{className:"file-name",children:i.name}),Object(n.jsx)(A,{file:i,setFile:u})," "]}),!i&&Object(n.jsx)("div",{className:"spacer",children:" "})]}),Object(n.jsx)(L,{setSelectedImg:r})]})})}function _(e){var t=e.selectedImg,r=e.setSelectedImg;return Object(n.jsx)("div",{className:"modal-backdrop",onClick:function(e){e.target.classList.contains("modal-backdrop")&&r(null)},children:Object(n.jsx)("img",{src:t,alt:"selectedImg"})})}function B(e){var t=Object(a.useState)(null),r=Object(o.a)(t,2),c=r[0],s=r[1];return Object(n.jsxs)(a.Fragment,{children:[Object(n.jsx)(M,{setSelectedImg:s}),c&&Object(n.jsx)(_,{selectedImg:c,setSelectedImg:s})]})}var z=r(33),D=r(30),W=r(283),G=r(285),V=r(284),X=(r(249),function(e){return{currentUser:e.user.currentUser}}),J=Object(V.a)({margins:{marginBottom:"1rem"},btn:{},btnContainer:{width:"100%",height:"auto",display:"grid",justifyItems:"center"}}),K=function(e){var t=e.label,r=J(),c=Object(z.c)(e),s=Object(o.a)(c,2),i=s[0],u=s[1];return Object(n.jsx)(a.Fragment,{children:Object(n.jsx)(W.a,Object(j.a)(Object(j.a)(Object(j.a)({className:"".concat(r.margins),label:t,size:"small",variant:"outlined"},i),e),{},{error:u.touched&&u.error,helperText:u.touched?u.error:"",fullWidth:!0}))})},Y=function(e){var t=e.content,r=e.color,c=e.type,s=J();return Object(n.jsx)(a.Fragment,{children:Object(n.jsx)("div",{className:"".concat(s.btnContainer),children:Object(n.jsx)(G.a,{className:"".concat(s.btn),variant:"contained",color:r,type:c,size:"small",children:t})})})};function Z(e){var t=Object(v.c)(X).currentUser,r=Object(v.b)();J(),Object(x.d)();Object(a.useEffect)((function(){t&&e.setPage("/firegram")}),[t]),Object(a.useEffect)((function(){t&&e.setPage("/firegram")}),[]);var c=function(e){var t=e.email,n=e.password,a=e.displayName;r(function(e){var t=e.email,r=e.password,n=e.displayName;return{type:y,payload:{email:t,password:r,displayName:n}}}({email:t,password:n,displayName:a}))};return Object(n.jsx)(a.Fragment,{children:Object(n.jsxs)("div",{className:"card",children:[Object(n.jsx)("div",{className:"title",children:"Create an Account"}),Object(n.jsx)(z.b,{initialValues:{displayName:"",email:"",password:"",confirmPassword:""},validationSchema:D.a({displayName:D.c().min(6,"Minimum of 6 characters").max(20,"Maximum of 20 characters").required("Required"),email:D.c().email("Invalid Email").required("Required"),password:D.c().min(3,"Minimum of 3 characters").max(20,"Maximum of 20 chracters").required("Required"),confirmPassword:D.c().oneOf([D.b("password")],"passwords don't match").required("Required")}),onSubmit:function(){var t=Object(d.a)(l.a.mark((function t(r,n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.resetForm,t.next=3,c(r);case 3:a(),console.log(e);case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),children:function(e){return Object(n.jsxs)(z.a,{children:[Object(n.jsx)(K,{type:"text",name:"displayName",label:"Username"}),Object(n.jsx)(K,{type:"email",name:"email",label:"Email"}),Object(n.jsx)(K,{type:"password",name:"password",label:"Password"}),Object(n.jsx)(K,{type:"password",name:"confirmPassword",label:"Confirm Password"}),Object(n.jsx)(Y,{type:"submit",content:"Sign up",color:"primary"})]})}})]})})}function H(e){return Object(n.jsx)("div",{children:Object(n.jsx)(Z,Object(j.a)({},e))})}var Q=function(e){return{currentUser:e.user.currentUser}},$=Object(V.a)({margins:{marginBottom:"1rem"},btn:{color:"white"},btnContainer:{marginTop:"0.5rem",width:"100%",height:"auto",display:"grid",justifyItems:"center"}}),ee=function(e){var t=e.label,r=Object(z.c)(e),c=Object(o.a)(r,2),s=c[0],i=c[1];return Object(n.jsx)(a.Fragment,{children:Object(n.jsx)(W.a,Object(j.a)(Object(j.a)(Object(j.a)({className:"",label:t,size:"small",variant:"outlined"},s),e),{},{error:i.touched&&i.error,helperText:i.touched?i.error:"",fullWidth:!0}))})},te=function(e){var t=e.content,r=e.color,c=e.type,s=$();return Object(n.jsx)(a.Fragment,{children:Object(n.jsx)("div",{className:"".concat(s.btnContainer),children:Object(n.jsx)(G.a,{className:"btn",variant:"contained",color:r,type:c,size:"small",children:t})})})};function re(e){var t=Object(v.c)(Q).currentUser,r=e.setPage,c=Object(v.b)(),s=(Object(x.d)(),$()),i=function(){var e=Object(d.a)(l.a.mark((function e(t){var r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.email,n=t.password,e.next=3,c(U({email:r,password:n}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){t&&r("/firegram")}),[t]),Object(a.useEffect)((function(){t&&r("/firegram")}),[]),Object(n.jsx)(a.Fragment,{children:Object(n.jsxs)("div",{className:"card",children:[Object(n.jsx)("div",{className:"title",children:"Login"}),Object(n.jsx)(z.b,{initialValues:{email:"",password:""},validationSchema:D.a({email:D.c().email("Invalid Email").required("Required"),password:D.c().min(3,"Minimum of 3 characters").max(20,"Maximum of 20 chracters").required("Required")}),onSubmit:function(){var e=Object(d.a)(l.a.mark((function e(t,r){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.resetForm,e.next=3,i(t);case 3:n();case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),children:function(e){return Object(n.jsxs)(z.a,{children:[Object(n.jsx)(ee,{className:"".concat(s.margins),type:"email",name:"email",label:"Email"}),Object(n.jsx)(ee,{type:"password",name:"password",label:"Password"}),Object(n.jsx)("span",{className:"forgot-password-link",onClick:function(){return r("/forgot-password")},children:"Forgot Password?"}),Object(n.jsx)(te,{color:"secondary",type:"submit",content:"Login"})]})}})]})})}function ne(e){return Object(n.jsx)(re,Object(j.a)({},e))}var ae=function(e){return{currentUser:e.user.currentUser}},ce=Object(V.a)({margins:{marginBottom:"1rem"},btn:{},btnContainer:{width:"100%",height:"auto",display:"grid",justifyItems:"center"}}),se=function(e){var t=e.label,r=ce(),c=Object(z.c)(e),s=Object(o.a)(c,2),i=s[0],u=s[1];return Object(n.jsx)(a.Fragment,{children:Object(n.jsx)(W.a,Object(j.a)(Object(j.a)(Object(j.a)({className:"".concat(r.margins),label:t,size:"small",variant:"outlined"},i),e),{},{error:u.touched&&u.error,helperText:u.touched?u.error:"",fullWidth:!0}))})},ie=function(e){var t=e.content,r=e.color,c=e.type,s=ce();return Object(n.jsx)(a.Fragment,{children:Object(n.jsx)("div",{className:"".concat(s.btnContainer),children:Object(n.jsx)(G.a,{className:"".concat(s.btn),variant:"contained",color:r,type:c,size:"small",fullWidth:!0,children:t})})})};function oe(e){Object(v.c)(ae).currentUser;var t=Object(v.b)(),r=(ce(),Object(x.d)(),function(e){var r=e.email;t(function(e){var t=e.email;return{type:E,payload:{email:t}}}({email:r}))});return Object(n.jsx)(a.Fragment,{children:Object(n.jsxs)("div",{className:"password-reset",children:[Object(n.jsx)("div",{className:"title",children:"Reset Your Password"}),Object(n.jsx)(z.b,{initialValues:{email:""},validationSchema:D.a({email:D.c().email("Invalid Email").required("Required")}),onSubmit:function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.resetForm,e.next=3,r(t);case 3:a();case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),children:function(e){return Object(n.jsxs)(z.a,{children:[Object(n.jsx)(se,{name:"email",type:"email",label:"Email Password"}),Object(n.jsx)(ie,{variant:"contained",type:"submit",color:"primary",content:"Send Reset Password Email"})]})}})]})})}function ue(e){return Object(n.jsx)(a.Fragment,{children:Object(n.jsx)(oe,Object(j.a)({},e))})}var le=function(){var e=Object(a.useState)("/firegram"),t=Object(o.a)(e,2),r=t[0],c=t[1];return Object(a.useEffect)((function(){c("/firegram")}),[]),Object(a.useEffect)((function(){console.log(r)}),[r]),Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(F,{setPage:c}),"/firegram"===r&&Object(n.jsx)(a.Fragment,{children:Object(n.jsx)(B,{})}),"/login"===r&&Object(n.jsx)(ne,{setPage:c}),"/sign-up"===r&&Object(n.jsx)(H,{setPage:c}),"/forgot-password"===r&&Object(n.jsx)(ue,{setPage:c})]})},de=r(44),je=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,287)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),n(e),a(e),c(e),s(e)}))},be=r(37),pe=r(129),fe=r(127),me={currentUser:null},Oe=Object(be.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(j.a)(Object(j.a)({},e),{},{currentUser:t.payload});case S:return Object(j.a)(Object(j.a)({},e),{},{currentUser:null});default:return e}}}),he=r(28),xe=l.a.mark(Fe),ve=l.a.mark(Ie),ge=l.a.mark(Ae),we=l.a.mark(Re),ye=l.a.mark(Te),Ne=l.a.mark(Le),ke=l.a.mark(qe),Se=l.a.mark(Me),Ee=l.a.mark(_e),Ue=l.a.mark(Be),Pe=l.a.mark(ze),Ce=l.a.mark(De);function Fe(e,t){var r,n;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(he.b)(h,{userAuth:e,additionalData:t});case 3:return r=a.sent,a.next=6,r.get();case 6:return n=a.sent,a.next=9,Object(he.c)(P(Object(j.a)({id:n.id},n.data())));case 9:a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),console.log(a.t0);case 14:case"end":return a.stop()}}),xe,null,[[0,11]])}function Ie(e){var t,r,n,a,c;return l.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,r=t.email,n=t.password,s.prev=1,s.next=4,p.signInWithEmailAndPassword(r,n);case 4:return a=s.sent,c=a.user,s.next=8,Fe(c);case 8:s.next=13;break;case 10:s.prev=10,s.t0=s.catch(1),console.log(s.t0);case 13:case"end":return s.stop()}}),ve,null,[[1,10]])}function Ae(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(he.d)(g,Ie);case 2:case"end":return e.stop()}}),ge)}function Re(e){var t,r,n,a,c,s;return l.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,r=t.email,n=t.password,a=t.displayName,i.prev=1,i.next=4,p.createUserWithEmailAndPassword(r,n);case 4:return c=i.sent,s=c.user,i.next=8,Fe(s,{displayName:a});case 8:i.next=13;break;case 10:i.prev=10,i.t0=i.catch(1),console.log(i.t0);case 13:case"end":return i.stop()}}),we,null,[[1,10]])}function Te(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(he.d)(y,Re);case 2:case"end":return e.stop()}}),ye)}function Le(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,new Promise((function(e,t){var r=p.onAuthStateChanged((function(t){r(),e(t)}),t)}));case 3:if(e=t.sent){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,Fe(e);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),Ne,null,[[0,10]])}function qe(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(he.d)(N,Le);case 2:case"end":return e.stop()}}),ke)}function Me(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.signOut();case 3:return e.next=5,Object(he.c)({type:S});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),Se,null,[[0,7]])}function _e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(he.d)(k,Me);case 2:case"end":return e.stop()}}),Ee)}function Be(e){var t;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload.email,r.prev=1,r.next=4,p.sendPasswordResetEmail(t);case 4:r.next=9;break;case 6:r.prev=6,r.t0=r.catch(1),console.log(r.t0);case 9:case"end":return r.stop()}}),Ue,null,[[1,6]])}function ze(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(he.d)(E,Be);case 2:case"end":return e.stop()}}),Pe)}function De(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(he.a)([Object(he.b)(Ae),Object(he.b)(Te),Object(he.b)(qe),Object(he.b)(_e),Object(he.b)(ze)]);case 2:case"end":return e.stop()}}),Ce)}var We=l.a.mark(Ge);function Ge(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(he.a)([Object(he.b)(De)]);case 2:case"end":return e.stop()}}),We)}var Ve=Object(pe.a)(),Xe=[Ve,fe.a],Je=Object(be.e)(Oe,{},Object(be.d)(be.a.apply(void 0,Xe)));Ve.run(Ge);var Ke=Je;i.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(v.a,{store:Ke,children:Object(n.jsx)(de.a,{children:Object(n.jsx)(le,{})})})}),document.getElementById("root")),je()},95:function(e,t,r){}},[[250,1,2]]]);
//# sourceMappingURL=main.c3be27b0.chunk.js.map