(this.webpackJsonpfiregram=this.webpackJsonpfiregram||[]).push([[0],{140:function(e,t,r){},141:function(e,t,r){},146:function(e,t,r){},249:function(e,t,r){},250:function(e,t,r){"use strict";r.r(t);var n=r(4),a=r(0),c=r.n(a),s=r(16),i=r.n(s),o=(r(140),r(13)),u=r(20),l=(r(141),r(6)),d=r.n(l),j=r(25),b=r(19),p=r(47);r(143),r(251),r(252);p.a.apps.length?p.a.app():p.a.initializeApp({apiKey:"AIzaSyCZsZBNOXiMRN1MEpIA5XW2M5coXBwNlkk",authDomain:"firegram-efff5.firebaseapp.com",projectId:"firegram-efff5",storageBucket:"firegram-efff5.appspot.com",messagingSenderId:"1047659849338",appId:"1:1047659849338:web:480fc244086afd36b27dc3"});var f=p.a.auth(),m=p.a.firestore(),O=p.a.storage(),h=new p.a.auth.GoogleAuthProvider;h.setCustomParameters({prompt:"select_account"});var x=function(){var e=Object(j.a)(d.a.mark((function e(t){var r,n,a,c,s,i,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.userAuth,n=t.additionalData,r){e.next=5;break}return e.abrupt("return");case 5:return a=r.uid,c=m.doc("users/".concat(a)),e.next=9,c.get();case 9:if(!e.sent.exists){s=r.displayName,i=r.email,o=new Date;try{c.set(Object(b.a)({displayName:s,email:i,createdAt:o},n))}catch(u){console.log(u)}}return e.abrupt("return",c);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=(r(146),r(27)),v="LOGIN_START",w="LOGIN_SUCCESS",y="SIGN_UP_START",N="CHECK_USER_SESSION",S="LOGOUT_START",k="LOGOUT_SUCCESS",E=function(e){var t=e.email,r=e.password;return{type:v,payload:{email:t,password:r}}},U=function(e){return{type:w,payload:e}},I=function(e){return{currentUser:e.user.currentUser}};function C(e){var t=e.setPage,r=(Object(u.d)(),Object(g.b)()),c=Object(g.c)(I).currentUser;return Object(a.useEffect)((function(){r({type:N})}),[]),Object(n.jsx)("div",{className:"navigation",children:Object(n.jsxs)("div",{className:"nav-container",children:[Object(n.jsx)("div",{className:"logo",onClick:function(){return t("/firegram")},children:"Firegram"}),Object(n.jsxs)("div",{className:"links",children:[!c&&Object(n.jsxs)(a.Fragment,{children:[Object(n.jsx)("span",{onClick:function(){return t("/login")},children:"Login"}),Object(n.jsx)("span",{onClick:function(){return t("/sign-up")},children:"SignUp"})]}),c&&Object(n.jsxs)(a.Fragment,{children:[Object(n.jsx)("span",{onClick:function(){return console.log("profile-page")},children:c.displayName}),Object(n.jsx)("span",{onClick:function(){return r({type:S})},children:"Logout"})]})]})]})})}var P=function(e){return{currentUser:e.user.currentUser}},F=function(e){var t=e.file,r=e.setFile,c=Object(g.c)(P).currentUser,s=function(e,t){var r=Object(a.useState)(0),n=Object(o.a)(r,2),c=n[0],s=n[1],i=Object(a.useState)(null),u=Object(o.a)(i,2),l=u[0],b=u[1],p=Object(a.useState)(null),f=Object(o.a)(p,2),h=f[0],x=f[1];return Object(a.useEffect)((function(){var r=O.ref(e.name),n=m.collection("pictures"),a=m.collection("users/".concat(t,"/pictures"));r.put(e).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;s(t)}),(function(e){b(e)}),Object(j.a)(d.a.mark((function c(){var s,i;return d.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,r.getDownloadURL();case 2:s=c.sent,i=new Date,n.add({url:s,createdAt:i,name:e.name,poster:t}),a.add({url:s,createdAt:i,name:e.name}),x(s);case 7:case"end":return c.stop()}}),c)}))))}),[e]),{progress:c,error:l,url:h}}(t,c.id),i=s.progress,u=s.url;return Object(a.useEffect)(Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(100!=i||!u){e.next=4;break}return console.log(u),e.next=4,r(null);case 4:case"end":return e.stop()}}),e)}))),[u]),Object(a.useEffect)((function(){console.log(c)}),[]),Object(a.useEffect)((function(){console.log(t)}),[t]),Object(n.jsxs)("div",{className:"progress-bar",style:{width:"".concat(i,"%")},children:[Math.round(i),"%"]})};var _=r(127),A=function(e){return{currentUser:e.user.currentUser}};function T(e){var t=Object(g.c)(A).currentUser,r=e.setSelectedImg,c=Object(a.useState)(null),s=Object(o.a)(c,2),i=s[0],u=s[1],l=Object(a.useState)("pictures"),d=Object(o.a)(l,2),j=d[0],p=d[1],f=function(e){var t=Object(a.useState)([]),r=Object(o.a)(t,2),n=r[0],c=r[1];return Object(a.useEffect)((function(){var t=m.collection(e).orderBy("createdAt","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(b.a)({id:e.id},e.data()))})),c(t)}));return function(){return t()}}),[e]),{pictureList:n}}(j).pictureList;return Object(a.useEffect)((function(){var e=[];f.forEach((function(t){e.push(t.url)})),e&&e.length===f.length&&u(e)}),[f]),Object(a.useEffect)((function(){p(t?"users/".concat(t.id,"/pictures"):"pictures")}),[t]),Object(n.jsx)("div",{className:"pictures",children:t&&i&&i.length===f.length&&i.map((function(e,t){return Object(n.jsx)(_.a.div,{className:"picture",onClick:function(){return r(e)},children:Object(n.jsx)("img",{src:e,alt:"pic no. ".concat(t+1)})},t)}))})}r(94);var L=function(e){return{currentUser:e.user.currentUser}};function R(e){var t=Object(g.c)(L).currentUser,r=e.setSelectedImg,c=Object(a.useState)(null),s=Object(o.a)(c,2),i=s[0],u=s[1],l=Object(a.useState)(null),b=Object(o.a)(l,2),p=b[0],f=b[1];Object(a.useEffect)(Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case 1:case"end":return e.stop()}}),e)}))),[i]);var m=["image/png","image/jpeg","image/jpeg"],O=function(){var e=Object(j.a)(d.a.mark((function e(t){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=t.target.files[0])&&m.includes(r.type)?(u(r),f(null)):(u(null),f("Please select an image file(png/jpg/jpeg)"));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)(a.Fragment,{children:Object(n.jsxs)("div",{className:"container",children:[Object(n.jsxs)("div",{className:"title",children:[t?"Your Pictures ".concat(t.displayName):"Please login to upload pictures",Object(n.jsx)("p",{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. "}),t&&Object(n.jsx)("input",{className:"upload-btn",type:"file",onChange:O}),p&&Object(n.jsx)("p",{className:"error",children:p}),i&&Object(n.jsxs)(a.Fragment,{children:[Object(n.jsx)("p",{className:"file-name",children:i.name}),Object(n.jsx)(F,{file:i,setFile:u})," "]}),!i&&Object(n.jsx)("div",{className:"spacer",children:" "})]}),Object(n.jsx)(T,{setSelectedImg:r})]})})}function q(e){var t=e.selectedImg,r=e.setSelectedImg;return Object(n.jsx)("div",{className:"modal-backdrop",onClick:function(e){e.target.classList.contains("modal-backdrop")&&r(null)},children:Object(n.jsx)("img",{src:t,alt:"selectedImg"})})}function D(e){var t=Object(a.useState)(null),r=Object(o.a)(t,2),c=r[0],s=r[1];return Object(n.jsxs)(a.Fragment,{children:[Object(n.jsx)(R,{setSelectedImg:s}),c&&Object(n.jsx)(q,{selectedImg:c,setSelectedImg:s})]})}var M=r(46),B=r(34),X=r(283),z=r(285),G=r(284),W=(r(249),function(e){return{currentUser:e.user.currentUser}}),V=Object(G.a)({margins:{marginBottom:"1rem"},btn:{},btnContainer:{width:"100%",height:"auto",display:"grid",justifyItems:"center"}}),J=function(e){var t=e.label,r=V(),c=Object(M.c)(e),s=Object(o.a)(c,2),i=s[0],u=s[1];return Object(n.jsx)(a.Fragment,{children:Object(n.jsx)(X.a,Object(b.a)(Object(b.a)(Object(b.a)({className:"".concat(r.margins),label:t,size:"small",variant:"outlined"},i),e),{},{error:u.touched&&u.error,helperText:u.touched?u.error:"",fullWidth:!0}))})},K=function(e){var t=e.content,r=e.color,c=e.type,s=V();return Object(n.jsx)(a.Fragment,{children:Object(n.jsx)("div",{className:"".concat(s.btnContainer),children:Object(n.jsx)(z.a,{className:"".concat(s.btn),variant:"contained",color:r,type:c,size:"small",children:t})})})};function Z(e){var t=Object(g.c)(W).currentUser,r=Object(g.b)();V(),Object(u.d)();Object(a.useEffect)((function(){t&&e.setPage("/firegram")}),[t]),Object(a.useEffect)((function(){t&&e.setPage("/firegram")}),[]);var c=function(e){var t=e.email,n=e.password,a=e.displayName;r(function(e){var t=e.email,r=e.password,n=e.displayName;return{type:y,payload:{email:t,password:r,displayName:n}}}({email:t,password:n,displayName:a}))};return Object(n.jsx)(a.Fragment,{children:Object(n.jsxs)("div",{className:"card",children:[Object(n.jsx)("div",{className:"title",children:"Create an Account"}),Object(n.jsx)(M.b,{initialValues:{displayName:"",email:"",password:"",confirmPassword:""},validationSchema:B.a({displayName:B.c().min(6,"Minimum of 6 characters").max(20,"Maximum of 20 characters").required("Required"),email:B.c().email("Invalid Email").required("Required"),password:B.c().min(3,"Minimum of 3 characters").max(20,"Maximum of 20 chracters").required("Required"),confirmPassword:B.c().oneOf([B.b("password")],"passwords don't match").required("Required")}),onSubmit:function(){var t=Object(j.a)(d.a.mark((function t(r,n){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.resetForm,t.next=3,c(r);case 3:a(),console.log(e);case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),children:function(e){return Object(n.jsxs)(M.a,{children:[Object(n.jsx)(J,{type:"text",name:"displayName",label:"Username"}),Object(n.jsx)(J,{type:"email",name:"email",label:"Email"}),Object(n.jsx)(J,{type:"password",name:"password",label:"Password"}),Object(n.jsx)(J,{type:"password",name:"confirmPassword",label:"Confirm Password"}),Object(n.jsx)(K,{type:"submit",content:"Sign up",color:"primary"})]})}})]})})}function H(e){return Object(n.jsx)("div",{children:Object(n.jsx)(Z,Object(b.a)({},e))})}var Y=function(e){return{currentUser:e.user.currentUser}},Q=Object(G.a)({margins:{marginBottom:"1rem"},btn:{},btnContainer:{marginTop:"0.5rem",width:"100%",height:"auto",display:"grid",justifyItems:"center"}}),$=function(e){var t=e.label,r=Object(M.c)(e),c=Object(o.a)(r,2),s=c[0],i=c[1];return Object(n.jsx)(a.Fragment,{children:Object(n.jsx)(X.a,Object(b.a)(Object(b.a)(Object(b.a)({className:"",label:t,size:"small",variant:"outlined"},s),e),{},{error:i.touched&&i.error,helperText:i.touched?i.error:"",fullWidth:!0}))})},ee=function(e){var t=e.content,r=e.color,c=e.type,s=Q();return Object(n.jsx)(a.Fragment,{children:Object(n.jsx)("div",{className:"".concat(s.btnContainer),children:Object(n.jsx)(z.a,{className:"".concat(s.btn),variant:"contained",color:r,type:c,size:"small",children:t})})})};function te(e){var t=Object(g.c)(Y).currentUser,r=Object(g.b)(),c=(Object(u.d)(),Q()),s=function(){var e=Object(j.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,a=t.password,e.next=3,r(E({email:n,password:a}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){t&&e.setPage("/firegram")}),[t]),Object(a.useEffect)((function(){t&&e.setPage("/firegram")}),[]),Object(n.jsx)(a.Fragment,{children:Object(n.jsxs)("div",{className:"card",children:[Object(n.jsx)("div",{className:"title",children:"Login"}),Object(n.jsx)(M.b,{initialValues:{email:"",password:""},validationSchema:B.a({email:B.c().email("Invalid Email").required("Required"),password:B.c().min(3,"Minimum of 3 characters").max(20,"Maximum of 20 chracters").required("Required")}),onSubmit:function(){var e=Object(j.a)(d.a.mark((function e(t,r){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.resetForm,e.next=3,s(t);case 3:n();case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),children:function(e){return Object(n.jsxs)(M.a,{children:[Object(n.jsx)($,{className:"".concat(c.margins),type:"email",name:"email",label:"Email"}),Object(n.jsx)($,{type:"password",name:"password",label:"Password"}),Object(n.jsx)("a",{className:"forgot-password-link",href:"forgot-password",children:"Forgot Password?"}),Object(n.jsx)(ee,{type:"submit",content:"Login",color:"secondary"})]})}})]})})}function re(e){return Object(n.jsx)(te,Object(b.a)({},e))}var ne=function(){var e=Object(a.useState)("/firegram"),t=Object(o.a)(e,2),r=t[0],c=t[1];return Object(u.d)(),Object(a.useEffect)((function(){console.log(r)}),[r]),Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(C,{setPage:c}),"/firegram"===r&&Object(n.jsx)(a.Fragment,{children:Object(n.jsx)(D,{})}),"/login"===r&&Object(n.jsx)(re,{setPage:c}),"/sign-up"===r&&Object(n.jsx)(H,{setPage:c})]})},ae=r(51),ce=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,287)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),n(e),a(e),c(e),s(e)}))},se=r(36),ie=r(128),oe=r(126),ue={currentUser:null},le=Object(se.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(b.a)(Object(b.a)({},e),{},{currentUser:t.payload});case k:return Object(b.a)(Object(b.a)({},e),{},{currentUser:null});default:return e}}}),de=r(29),je=d.a.mark(we),be=d.a.mark(ye),pe=d.a.mark(Ne),fe=d.a.mark(Se),me=d.a.mark(ke),Oe=d.a.mark(Ee),he=d.a.mark(Ue),xe=d.a.mark(Ie),ge=d.a.mark(Ce),ve=d.a.mark(Pe);function we(e,t){var r,n;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(de.b)(x,{userAuth:e,additionalData:t});case 3:return r=a.sent,a.next=6,r.get();case 6:return n=a.sent,a.next=9,Object(de.c)(U(Object(b.a)({id:n.id},n.data())));case 9:a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),console.log(a.t0);case 14:case"end":return a.stop()}}),je,null,[[0,11]])}function ye(e){var t,r,n,a,c;return d.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,r=t.email,n=t.password,s.prev=1,s.next=4,f.signInWithEmailAndPassword(r,n);case 4:return a=s.sent,c=a.user,s.next=8,we(c);case 8:s.next=13;break;case 10:s.prev=10,s.t0=s.catch(1),console.log(s.t0);case 13:case"end":return s.stop()}}),be,null,[[1,10]])}function Ne(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.d)(v,ye);case 2:case"end":return e.stop()}}),pe)}function Se(e){var t,r,n,a,c;return d.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,r=t.email,n=t.password,t.displayName,s.prev=1,s.next=4,f.createUserWithEmailAndPassword(r,n);case 4:return a=s.sent,c=a.user,s.next=8,we(c);case 8:s.next=13;break;case 10:s.prev=10,s.t0=s.catch(1),console.log(s.t0);case 13:case"end":return s.stop()}}),fe,null,[[1,10]])}function ke(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.d)(y,Se);case 2:case"end":return e.stop()}}),me)}function Ee(){var e;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,new Promise((function(e,t){var r=f.onAuthStateChanged((function(t){r(),e(t)}),t)}));case 3:if(e=t.sent){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,we(e);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),Oe,null,[[0,10]])}function Ue(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.d)(N,Ee);case 2:case"end":return e.stop()}}),he)}function Ie(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.signOut();case 3:return e.next=5,Object(de.c)({type:k});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),xe,null,[[0,7]])}function Ce(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.d)(S,Ie);case 2:case"end":return e.stop()}}),ge)}function Pe(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.a)([Object(de.b)(Ne),Object(de.b)(ke),Object(de.b)(Ue),Object(de.b)(Ce)]);case 2:case"end":return e.stop()}}),ve)}var Fe=d.a.mark(_e);function _e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.a)([Object(de.b)(Pe)]);case 2:case"end":return e.stop()}}),Fe)}var Ae=Object(ie.a)(),Te=[Ae,oe.a],Le=Object(se.e)(le,{},Object(se.d)(se.a.apply(void 0,Te),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));Ae.run(_e);var Re=Le;i.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(g.a,{store:Re,children:Object(n.jsx)(ae.a,{children:Object(n.jsx)(ne,{})})})}),document.getElementById("root")),ce()},94:function(e,t,r){}},[[250,1,2]]]);
//# sourceMappingURL=main.a3db2015.chunk.js.map